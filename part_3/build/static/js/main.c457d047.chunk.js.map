{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Persons.js","services/phone_Number.js","App.js","index.js"],"names":["Filter","search","setSearch","value","onChange","e","target","Notification","message","className","PersonForm","handleAdd","newName","setNewName","newNumber","setNewNumber","onSubmit","required","type","Persons","result","handleDelete","map","person","id","name","number","onClick","base_URL","getAll","a","axios","get","request","data","create","post","update","put","deletePerson","delete","phoneService","App","useState","persons","setPersons","setResult","setMessage","setShowTime","setTimeout","useEffect","initialNumbers","newResults","filter","toLowerCase","includes","toLocaleLowerCase","preventDefault","window","confirm","targetPerson","p","personObj","newA","objIndex","findIndex","obj","document","querySelector","focus","newPerson","then","returnedPerson","concat","catch","err","response","error","console","log","newArr","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c457d047.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const Filter = ({search,setSearch}) => {\r\n    return (\r\n        <div>\r\n            filter shown with <input value={search} onChange={e => setSearch(e.target.value)}></input>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport '../index.css'\r\nexport const Notification = ({message}) => {\r\n  if(message === null){\r\n      return null\r\n  }\r\n  return (\r\n      <div className='err'>\r\n          {message}\r\n      </div>\r\n  )\r\n  \r\n}\r\n","import React from 'react';\r\n\r\nexport const PersonForm = ({handleAdd, newName, setNewName, newNumber, setNewNumber}) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={handleAdd}>\r\n                <div>\r\n                    <div>name: <input className='input' value={newName} onChange={e => setNewName(e.target.value)} required /></div>\r\n                    <div>number: <input value={newNumber} onChange={e => setNewNumber(e.target.value)} required /></div>\r\n                </div>\r\n                <div><button type=\"submit\">add</button></div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nexport const Persons = ({ result, handleDelete }) => {\r\n    return (\r\n        <div>\r\n            {result.map(person =>\r\n                <div id={person.id} key={person.name}>\r\n                    {person.name} {person.number}\r\n                    <button onClick={() => handleDelete(person.id)}>delete</button>\r\n                </div>)}\r\n        </div>\r\n    )\r\n}\r\n","import axios from \"axios\"\r\n\r\nconst base_URL = '/api/persons'\r\n\r\nconst getAll = async () => {\r\n    const request = await axios.get(base_URL)\r\n    return request.data\r\n}\r\n\r\nconst create = async (newNumber) => {\r\n    const request = await axios.post(base_URL, newNumber)\r\n    return request.data\r\n}\r\n\r\nconst update = async (id, person) => {\r\n    const request = await axios.put(`${base_URL}/${id}`, person)\r\n    return request.data\r\n}\r\n\r\nconst deletePerson = async (id) => {\r\n    await axios.delete(`${base_URL}/${id}`)\r\n}\r\n\r\nconst phoneService = {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    deletePerson: deletePerson\r\n}\r\nexport default phoneService","import React, { useState, useEffect } from 'react'\nimport { Filter } from './components/Filter'\nimport { Notification } from './components/Notification'\nimport { PersonForm } from './components/PersonForm'\nimport { Persons } from './components/Persons'\nimport phoneService from './services/phone_Number'\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [result, setResult] = useState([])\n  const [message, setMessage] = useState('Notification')\n  const setShowTime = () => {\n    setTimeout(() => setMessage('Notification'), 3000)\n  }\n  useEffect(() => {\n    (async () => {\n      const initialNumbers = await phoneService.getAll()\n      setPersons(initialNumbers)\n    })()\n  }, [])\n  useEffect(() => {\n    const newResults = [...persons]\n    setResult(newResults.filter(a => (a.name.toLowerCase()).includes(search.toLocaleLowerCase())))\n  }, [search, persons])\n\n  const handleAdd = (e) => {\n    e.preventDefault()\n    const nameArr = persons.map(person => person.name.toLowerCase())\n    if (nameArr.includes(newName.toLowerCase())) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const targetPerson = persons.filter(p => p.name.toLowerCase() === newName.toLowerCase())\n        targetPerson[0].number = newNumber\n        const personObj = targetPerson[0]\n        phoneService.update(targetPerson[0].id, personObj)\n        const newA = [...persons]\n        const objIndex = newA.findIndex((obj => obj.name.toLowerCase() === newName.toLowerCase()))\n        newA[objIndex].number = newNumber\n        setMessage(`Number of ${personObj.name} is changed into ${personObj.number}`)\n        setNewName('')\n        setNewNumber('')\n        document.querySelector('.input').focus()\n        setPersons(newA)\n        setShowTime()\n      }\n    }\n    else {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n        phoneService.create(newPerson).then((returnedPerson) => {\n          setMessage(`added ${newPerson.name}`)\n          setShowTime()\n          setPersons(persons.concat(returnedPerson))\n        })\n      .catch ((err)=>{\n        setMessage(err.response.data.error)\n        setShowTime()\n      }) \n      setNewName('')\n      setNewNumber('')\n      document.querySelector('.input').focus()\n    }\n  }\n  const handleDelete = (id) => {\n    if (window.confirm(`Delete ${persons.filter(p => p.id === id)[0].name}?`)) {\n      phoneService.deletePerson(id).then(() => {\n        console.log(id)\n        const newArr = persons.filter(p => p.id !== id)\n        setPersons(newArr)\n        setMessage(`${persons.filter(p => p.id === id)[0].name} is deleted`)\n        setShowTime()\n      }).catch(() => {\n        setMessage(`Information of ${persons.filter(p => p.id === id)[0].name} has already been removed from server`)\n        setShowTime()\n      })\n    }\n  }\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter search={search} setSearch={setSearch} />\n      <h3>add a new</h3>\n      <PersonForm handleAdd={handleAdd} newName={newName} setNewName={setNewName}\n        newNumber={newNumber} setNewNumber={setNewNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons result={result} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\nReactDOM.render(\n    <App />, document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}